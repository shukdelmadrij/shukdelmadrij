define("channel",["extlycore"],function(e){"use strict";var t={get:function(e){var t=autotweet_canvas_app_url,n="My-App-ID",a="My-App-Secret",o="My-Access-Token",i=e.$("#use_own_api").val(),s=e.$("#XTtoken").attr("name");"1"===i?(t=e.$("#canvas_page").val().trim(),n=e.$("#app_id").val().trim(),a=e.$("#secret").val().trim(),e.$("#canvas_page").val(t),e.$("#app_id").val(n),e.$("#secret").val(a)):"2"===i&&(n=e.$("#app_id").val().trim(),a=e.$("#secret").val().trim(),e.$("#app_id").val(n),e.$("#secret").val(a)),o=e.$("#access_token").val().trim(),e.$("#access_token").val(o);var r={p_own_app:i,p_canvas_page:t,p_encoded_canvas_page:encodeURIComponent(t),p_app_id:encodeURIComponent(n),p_secret:encodeURIComponent(a),p_access_token:encodeURIComponent(o),p_token:encodeURIComponent(s)},l="app_id="+r.p_app_id+"&secret="+r.p_secret+"&access_token="+r.p_access_token+"&ownapp="+r.p_own_app+"&canvas_page="+r.p_encoded_canvas_page+"&token="+r.p_token;return r.p_url_params=l,r},getLi:function(e){var t=e.$("#api_key").val(),n=e.$("#secret_key").val(),a=e.$("#oauth_user_token").val(),o=e.$("#oauth_user_secret").val(),i=e.$("#XTtoken").attr("name"),s={p_api_key:t,p_secret_key:encodeURIComponent(n),p_oauth_user_token:encodeURIComponent(a),p_oauth_user_secret:encodeURIComponent(o),p_token:encodeURIComponent(i)},r="api_key="+s.p_api_key+"&secret_key="+s.p_secret_key+"&oauth_user_token="+s.p_oauth_user_token+"&oauth_user_secret="+s.p_oauth_user_secret+"&token="+s.p_token;return s.p_url_params=r,s}},n={showSuccess:function(e,t,n,a){e.$("#user_id").val(t),this.assignSocialUrl(e,"social_url",n,a),e.$("#validation-notchecked").hide(),e.$("#validation-error").hide(),e.$("#validation-errormsg").hide(),e.$("#validation-success").show()},assignSocialUrl:function(e,t,n,a){a&&(e.$("#"+t).val(a),e.$("."+t).html(this.formatUrl(n,a)))},showError:function(e,t){e.$("#user_id").val(""),e.$("#validation-notchecked").hide(),e.$("#validation-success").hide(),e.$("#validation-theerrormsg").html(t),e.$("#validation-error").show(),e.$("#validation-errormsg").show()},formatUrl:function(e,t){return'<p><a href="'+t+'" target="_blank">'+e+" "+t+"</a></p>"}},a=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getParamsForm&toolbar=none")}}),o=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getFbAlbums")}}),i=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getFbChannels")}}),s=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getFbChValidation")}}),r=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getFbExtend")}}),l=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getFbValidation")}}),c=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getGplusValidation")}}),d=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getLiGroups")}}),h=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getLiCompanies")}}),u=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getLiValidation")}}),p=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getTwValidation")}}),g=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getVkGroups")}}),v=e.ExtlyModel.extend({url:function(){return e.SefHelper.route("index.php?option=com_autotweet&view=channels&task=getVkValidation")}}),f=Backbone.Collection.extend({model:a}),m=Backbone.Collection.extend({model:o}),k=Backbone.Collection.extend({model:i}),w=Backbone.Collection.extend({model:s}),$=Backbone.Collection.extend({model:r}),b=Backbone.Collection.extend({model:l}),x=Backbone.Collection.extend({model:c}),C=Backbone.Collection.extend({model:h}),y=Backbone.Collection.extend({model:d}),T=Backbone.Collection.extend({model:u}),E=Backbone.Collection.extend({model:p}),S=Backbone.Collection.extend({model:g}),I=Backbone.Collection.extend({model:v}),F=Backbone.View.extend({events:{"change #channeltype_id":"onChangeChannelType"},initialize:function(){this.collection.on("add",this.loadchannel,this)},onChangeChannelType:function nt(){var e=this;e.$(".loaderspinner").addClass("loading"),this.collection.create(this.collection.model,{attrs:{channelId:this.$("#channel_id").val(),channelTypeId:this.$("#channeltype_id").val(),token:this.$("#XTtoken").attr("name")},wait:!0,dataType:"text",success:function(t,n,a){e.$("#channel_data").html(t.get("message")),e.refresh()},error:function(t,n,a){e.$("#channel_data").html(n.responseText)}})},loadchannel:function at(e){var t=e.get("message");this.$("#channel_data").html(t),this.refresh()},refresh:function ot(){this.$("#channel_data select").chosen({disable_search_threshold:10,allow_single_deselect:!0}),this.$("#channel_data .nav-tabs a").tab(),this.$("#channel_data .nav-tabs a").click(function(e){e.preventDefault()}),this.$("#channel_data .nav-tabs a:first").tab("show")},submitbutton:function it(e){var t,n=this.el;"channel.cancel"===e&&Joomla.submitform(e,n),t=document.formvalidator.isValid(n),t&&Joomla.submitform(e,n)}}),V=Backbone.View.extend({events:{"click #fbalbumloadbutton":"onAlbumsReq"},initialize:function(){this.collection.on("add",this.loadFbAlbum,this),this.fbalbumlist="#xtformfbalbum_id"},onAlbumsReq:function st(){var a=this,o=t.get(a),i=a.$(this.fbalbumlist),s=this.options.fbChannelView,r=s.getFbChannelId(),l=s.getFbChannelAccessToken();e.UiHelper.listReset(i),this.collection.create(this.collection.model,{attrs:{own_app:o.p_own_app,app_id:o.p_app_id,secret:o.p_secret,access_token:o.p_access_token,channel_id:r,channel_access_token:l,token:o.p_token},wait:!0,dataType:"text",error:function(e,t,a){n.showError(messagesview,t.responseText)}})},loadFbAlbum:function rt(e){var t=this.$(this.fbalbumlist),a;t.empty(),e.get("status")?(a=e.get("albums"),_.each(a,function(e){var n=new Option;n.value=e.id,n.text=e.name,t.append(n)}),t.trigger("liszt:updated")):n.showError(this.attributes.messagesview,e.get("error_message"))}}),R=Backbone.View.extend({events:{"change #xtformfbchannel_id":"onChangeChannel"},initialize:function(){this.attributes.dispatcher.on("fbapp:channelschanged",this.onAccessTokenChanged,this),this.collection.on("add",this.loadFbChannel,this),this.fbchannellist="#xtformfbchannel_id",this.fbChannelSelected=null,this.$(".group-warn").fadeOut()},onAccessTokenChanged:function(){var a=this,o=this.attributes.messagesview,i=t.get(a);e.UiHelper.listReset(a.$(this.fbchannellist)),this.collection.create(this.collection.model,{attrs:{own_app:i.p_own_app,app_id:i.p_app_id,secret:i.p_secret,access_token:i.p_access_token,token:i.p_token},wait:!0,dataType:"text",error:function(e,t,a){n.showError(o,t.responseText)}})},onChangeChannel:function(){var e,t,a,o,i;this.fbChannelSelected=null,e=this.getFbChannelAccessToken(),t=this.getFbChannelType(),a=this.getFbChannelSelected(),o=a.attr("social_icon"),i=a.attr("social_url"),this.$("#fbchannel_access_token").val(e),n.assignSocialUrl(this,"social_url",o,i),"Group"===t?this.$(".group-warn").fadeIn():this.$(".group-warn").fadeOut(),"User"===t?this.$(".open_graph_features").fadeIn():this.$(".open_graph_features").fadeOut(),this.$(".channel-type").val(t)},getFbChannelSelected:function(){return this.fbChannelSelected||(this.fbChannelSelected=this.$(this.fbchannellist+" option:selected")),this.fbChannelSelected},getFbChannelAccessToken:function(){var e=this.getFbChannelSelected(),t="INVALID";return e&&(t=e.attr("access_token")),t},getFbChannelType:function(){var e=this.getFbChannelSelected(),t="INVALID";return e&&(t=e.attr("data_type")),t},getFbChannelId:function(){return this.getFbChannelSelected().val()},loadFbChannel:function(e){var t=this.$(this.fbchannellist),a,o,i=!0;t.empty(),this.fbChannelSelected=null,e.get("status")?(a=e.get("channels"),o=e.get("icon"),_.each(a,function(e){var n=new Option;n.value=e.id,n.text=e.type+": "+e.name,jQuery(n).attr("access_token",e.access_token).attr("data_type",e.type).attr("social_icon",o).attr("social_url",e.url),i&&(i=!1,n.selected="selected"),t.append(n)}),this.onChangeChannel(),t.trigger("liszt:updated")):n.showError(this.attributes.messagesview,e.get("error_message"))}}),q=Backbone.View.extend({events:{"click #fbchvalidationbutton":"onValidationReq"},initialize:function(){var e=this;this.collection.on("add",this.loadvalidation,this),this.$el.ajaxStart(function(){e.$(".loaderspinner72").addClass("loading72")}).ajaxStop(function(){e.$(".loaderspinner72").removeClass("loading72")})},onValidationReq:function(){var e=this,a=t.get(e),o=this.$("#fbchannel_access_token").val();this.collection.create(this.collection.model,{attrs:{own_app:a.p_own_app,app_id:a.p_app_id,secret:a.p_secret,access_token:a.p_access_token,token:a.p_token,fbchannel_access_token:o},wait:!0,dataType:"text",error:function(t,a,o){n.showError(e,a.responseText)}})},loadvalidation:function(e){var t=e.get("status"),n=e.get("error_message"),a=e.get("tokenInfo"),o=a.issued_at,i=a.expires_at;t?(this.$("#channel_issued_at").val(o),this.$("#channel_expires_at").val(i)):(this.$("#channel_issued_at").val(n),this.$("#channel_expires_at").val(""))}}),B=Backbone.View.extend({events:{"click #fbextendbutton":"onExtendReq"},initialize:function(){var e=this;this.collection.on("add",this.loadExtend,this),this.$el.ajaxStart(function(){e.$(".loaderspinner72").addClass("loading72")}).ajaxStop(function(){e.$(".loaderspinner72").removeClass("loading72")})},onExtendReq:function(){var e=this,a=t.get(e);this.collection.create(this.collection.model,{attrs:{own_app:a.p_own_app,app_id:a.p_app_id,secret:a.p_secret,access_token:a.p_access_token,token:a.p_token},wait:!0,dataType:"text",error:function(t,a,o){n.showError(e,a.responseText)}})},loadExtend:function(e){var t=e.get("status"),a=e.get("error_message"),o,i,s,r,l;t?(o=e.get("user"),i=e.get("extended_token"),s=e.get("tokenInfo"),r=s.issued_at,l=s.expires_at,o?n.showSuccess(this,o.id):n.showSuccess(this,s.data.user_id),this.$("#access_token").val(i),this.$("#issued_at").val(r),this.$("#expires_at").val(l),this.attributes.dispatcher.trigger("fbapp:channelschanged")):n.showError(this,a)}}),A=Backbone.View.extend({events:{"click #authextendbutton":"onExtendReq","click #authbutton":"onAuthorizationReq","click #fbvalidationbutton":"onValidationReq"},initialize:function(){var e=this;this.attributes.dispatcher.on("change:use_own_api",this.onChangeOwnApi,this),this.attributes.dispatcher.on("change:og_features",this.onChangeOgFeatures,this),this.collection.on("add",this.loadvalidation,this),this.$el.ajaxStart(function(){e.$(".loaderspinner72").addClass("loading72")}).ajaxStop(function(){e.$(".loaderspinner72").removeClass("loading72")}),this.onChangeOwnApi()},onChangeOwnApi:function(e){var t=this.$("#use_own_api").val(),n="2"!=t;n?(this.$("#canvas_page").addClass("required").addClass("validate-facebookapp"),this.$("#authextendbutton").fadeOut(0),this.$("#authbutton").fadeIn(0),this.$("#fbextendbutton").fadeOut(0),this.$("#fbvalidationbutton").fadeIn(0)):(this.$("#canvas_page").removeClass("required").removeClass("validate-facebookapp"),this.$("#authextendbutton").fadeIn(0),this.$("#authbutton").fadeOut(0),this.$("#fbextendbutton").fadeIn(0),this.$("#fbvalidationbutton").fadeOut(0)),"0"===t?(this.$("#own-app-testing").fadeIn(),this.$("#own-app-details").fadeOut(),this.$("#app_id").removeClass("required"),this.$("#secret").removeClass("required"),this.$("#canvas_page").removeClass("required")):"1"===t?(this.$("#own-app-testing").fadeOut(),this.$("#own-app-details-canvas-page").fadeIn(0),this.$("#own-app-details").fadeIn(),this.$("#app_id").addClass("required"),this.$("#secret").addClass("required"),this.$("#canvas_page").addClass("required")):(this.$("#own-app-testing").fadeOut(),this.$("#own-app-details-canvas-page").fadeOut(0),this.$("#own-app-details").fadeIn(),this.$("#app_id").addClass("required"),this.$("#secret").addClass("required"),this.$("#canvas_page").removeClass("required"))},onChangeOgFeatures:function(){var e=this.$("#og_features").val();"1"===e?this.$("#og-fields").fadeIn():this.$("#og-fields").fadeOut()},onAuthorizationReq:function(e){var n=t.get(this);e.preventDefault();var a=n.p_canvas_page+"?"+n.p_url_params;a.match(/apps.facebook.com/)?window.open(a):alert("Invalid Canvas Page. It must be http://apps.facebook.com/...")},onExtendReq:function(e){e&&e.preventDefault(),window.fbAsyncInit?this.fbAssignToken():this.fbInit()},fbInit:function(){var e=this,n=t.get(this);window.fbAsyncInit=function(){FB.init({appId:n.p_app_id,version:"v2.0",status:!0,xfbml:!1}),e.fbAssignToken()},function(e,t,n){var a,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(a=e.createElement(t),a.id=n,a.src="//connect.facebook.com/en_US/sdk.js",o.parentNode.insertBefore(a,o))}(document,"script","facebook-jssdk")},fbAssignToken:function(){var e=this;FB.login(function(t){t.authResponse?FB.getLoginStatus(function(t){var n;"connected"===t.status?(n=t.authResponse.accessToken,e.$("#access_token").val(n)):e.onExtendReq()}):alert("User cancelled login or did not fully authorize.")},{scope:"public_profile,manage_pages,publish_actions,user_events,user_groups,user_photos,user_videos"})},onValidationReq:function(){var e=this,a=t.get(e);this.collection.create(this.collection.model,{attrs:{own_app:a.p_own_app,app_id:a.p_app_id,secret:a.p_secret,access_token:a.p_access_token,token:a.p_token},wait:!0,dataType:"text",error:function(t,a,o){n.showError(e,a.responseText)}})},loadvalidation:function(e){var t=e.get("status"),a=e.get("error_message"),o,i,s,r;t?(o=e.get("user"),i=e.get("tokenInfo"),s=i.issued_at,r=i.expires_at,n.showSuccess(this,o.id),this.$("#issued_at").val(s),this.$("#expires_at").val(r),this.attributes.dispatcher.trigger("fbapp:channelschanged")):n.showError(this,a)}}),U=Backbone.View.extend({events:{"click #gplusvalidationbutton":"onValidationReq"},initialize:function(){this.collection.on("add",this.loadvalidation,this)},onValidationReq:function(){var e=this,t=e.$("#channel_id").val().trim(),a=e.$("#client_secret").val().trim(),o=e.$("#developer_key").val().trim(),i=e.$("#XTtoken").attr("name");e.$("#channel_id").val(t),e.$("#client_secret").val(a),e.$("#developer_key").val(o),e.$(".loaderspinner").addClass("loading"),this.collection.create(this.collection.model,{attrs:{channel_id:t,token:i},wait:!0,dataType:"text",error:function(t,a,o){e.$(".loaderspinner").removeClass("loading"),n.showError(e,a.responseText)}})},loadvalidation:function lt(e){var t=e.get("status"),a=e.get("error_message"),o=e.get("user"),i=e.get("social_icon"),s=e.get("social_url");this.$(".loaderspinner").removeClass("loading"),t?n.showSuccess(this,o.id,i,s):n.showError(this,a)}}),j=Backbone.View.extend({events:{"click #licompanyloadbutton":"onChangeChannel","change #xtformcompany_id":"onChangeCompany"},initialize:function(){this.collection.on("add",this.loadLiCompany,this),this.licompanylist="#xtformcompany_id",this.$(".group-warn").fadeOut()},onChangeChannel:function(){var a=this,o=t.getLi(a);e.UiHelper.listReset(a.$(this.licompanylist)),this.collection.create(this.collection.model,{attrs:{api_key:o.p_api_key,secret_key:o.p_secret_key,oauth_user_token:o.p_oauth_user_token,oauth_user_secret:o.p_oauth_user_secret,token:o.p_token},wait:!0,dataType:"text",error:function(e,t,a){n.showError(this,t.responseText)}})},loadLiCompany:function(e){var t=this.$(this.licompanylist),a,o,i=!0;t.empty(),e.get("status")?(a=e.get("channels"),o=e.get("icon"),_.each(a,function(e){var n=new Option;n.value=e.id,n.text=e.name,jQuery(n).attr("social_icon",o).attr("social_url",e.url),i&&(i=!1,n.selected="selected"),t.append(n)}),this.onChangeCompany(),n.showSuccess(this,""),t.trigger("liszt:updated")):n.showError(this,e.get("error_message"))},onChangeCompany:function(){var e=this.$("#xtformcompany_id option:selected"),t=e.attr("social_icon"),a=e.attr("social_url");n.assignSocialUrl(this,"social_url_licompany",t,a)}}),z=Backbone.View.extend({events:{"click #ligrouploadbutton":"onChangeChannel","change #xtformgroup_id":"onChangeGroup"},initialize:function(){this.collection.on("add",this.loadLiGroup,this),this.ligrouplist="#xtformgroup_id",this.$(".group-warn").fadeOut()},onChangeChannel:function(){var a=this,o=t.getLi(a);e.UiHelper.listReset(a.$(this.ligrouplist)),this.collection.create(this.collection.model,{attrs:{api_key:o.p_api_key,secret_key:o.p_secret_key,oauth_user_token:o.p_oauth_user_token,oauth_user_secret:o.p_oauth_user_secret,token:o.p_token},wait:!0,dataType:"text",error:function(e,t,a){n.showError(this,t.responseText)}})},loadLiGroup:function(e){var t=this.$(this.ligrouplist),a,o,i=!0;t.empty(),e.get("status")?(a=e.get("channels"),o=e.get("icon"),_.each(a,function(e){var n=new Option;n.value=e.id,n.text=e.name,jQuery(n).attr("social_icon",o).attr("social_url",e.url),i&&(i=!1,n.selected="selected"),t.append(n)}),this.onChangeGroup(),n.showSuccess(this,""),t.trigger("liszt:updated")):n.showError(this,e.get("error_message"))},onChangeGroup:function(){var e=this.$("#xtformgroup_id option:selected"),t=e.attr("social_icon"),a=e.attr("social_url");n.assignSocialUrl(this,"social_url_ligroup",t,a)}}),O=Backbone.View.extend({events:{"click #livalidationbutton":"onValidationReq"},initialize:function(){this.collection.on("add",this.loadvalidation,this)},onValidationReq:function ct(){var e=this,t=e.$("#api_key").val().trim(),a=e.$("#secret_key").val().trim(),o=e.$("#oauth_user_token").val().trim(),i=e.$("#oauth_user_secret").val().trim(),s=e.$("#XTtoken").attr("name");e.$("#api_key").val(t),e.$("#secret_key").val(a),e.$("#oauth_user_token").val(o),e.$("#oauth_user_secret").val(i),e.$(".loaderspinner").addClass("loading"),this.collection.create(this.collection.model,{attrs:{api_key:t,secret_key:a,oauth_user_token:o,oauth_user_secret:i,token:s},wait:!0,dataType:"text",error:function(t,a,o){e.$(".loaderspinner").removeClass("loading"),n.showError(e,a.responseText)}})},loadvalidation:function dt(e){var t=e.get("status"),a=e.get("error_message"),o=e.get("user"),i=e.get("icon"),s=e.get("url");this.$(".loaderspinner").removeClass("loading"),t?n.showSuccess(this,o.id,i,s):n.showError(this,a)}}),Q=Backbone.View.extend({events:{"click #twvalidationbutton":"onValidationReq"},initialize:function(){this.collection.on("add",this.loadvalidation,this)},onValidationReq:function ht(){var e=this,t=e.$("#consumer_key").val().trim(),a=e.$("#consumer_secret").val().trim(),o=e.$("#access_token").val().trim(),i=e.$("#access_token_secret").val().trim(),s=e.$("#XTtoken").attr("name");e.$("#consumer_key").val(t),e.$("#consumer_secret").val(a),e.$("#access_token").val(o),e.$("#access_token_secret").val(i),e.$(".loaderspinner").addClass("loading"),this.collection.create(this.collection.model,{attrs:{consumer_key:t,consumer_secret:a,access_token:o,access_token_secret:i,token:s},wait:!0,dataType:"text",error:function(t,a,o){e.$(".loaderspinner").removeClass("loading"),n.showError(e,a.responseText)}})},loadvalidation:function ut(e){var t=e.get("status"),a=e.get("error_message"),o=e.get("user"),i=e.get("icon"),s=e.get("url");this.$(".loaderspinner").removeClass("loading"),t?n.showSuccess(this,o.id_str,i,s):n.showError(this,a)}}),H=Backbone.View.extend({events:{"click #vkgrouploadbutton":"ongroupsReq","change #xtformvkgroup_id":"onChangeGroup"},initialize:function(){this.collection.on("add",this.loadVkGroup,this),this.vkgrouplist="#xtformvkgroup_id"},ongroupsReq:function(){var t=this,a=t.$(this.vkgrouplist),o=t.$("#channel_id").val().trim(),i=t.$("#access_token").val().trim(),s=t.$("#XTtoken").attr("name");t.$("#channel_id").val(o),t.$("#access_token").val(i),e.UiHelper.listReset(a),this.collection.create(this.collection.model,{attrs:{channel_id:o,access_token:i,token:s},wait:!0,dataType:"text",error:function(e,a,o){n.showError(t,a.responseText)}})},loadVkGroup:function(e){var t=this.$(this.vkgrouplist),a,o,i=!0;t.empty(),e.get("status")?(a=e.get("groups"),o=e.get("social_icon"),_.each(a,function(e){var n=new Option;n.value=e.id,n.text=e.name,jQuery(n).attr("social_icon",o).attr("social_url",e.url),i&&(i=!1,n.selected="selected"),t.append(n)}),this.onChangeGroup(),t.trigger("liszt:updated")):n.showError(this,e.get("error_message"))},onChangeGroup:function(){var e=this.$("#xtformvkgroup_id option:selected"),t=e.attr("social_icon"),a=e.attr("social_url");n.assignSocialUrl(this,"social_url_vkgroup",t,a)}}),G=Backbone.View.extend({events:{"click #authorizeButton":"onAuthorization","click #vkvalidationbutton":"onValidationReq"},initialize:function(){this.collection.on("add",this.loadvalidation,this)},onAuthorization:function pt(){this.$("#authorizeGroup").addClass("hide"),this.$("#validationGroup").removeClass("hide")},processTokenUrl:function _t(e){var t,n,a={};return t=e.$("#token_url").val().trim(),n=t.split("#"),2!=_.size(n)?!1:(t=n[1],_.isEmpty(t)?!1:(n=t.split("&"),_.each(n,function(e){var t=e.split("="),n,o;2==_.size(t)&&(n=t[0],o=t[1],jQuery("#raw_"+n).val(o),a[n]=o)}),jQuery("#access_token").val(JSON.stringify(a)),!0))},onValidationReq:function gt(){var e=this,t=e.$("#channel_id").val(),a,o=e.$("#XTtoken").attr("name");this.processTokenUrl(e)||n.showError(e,"Invalid Token Url"),a=e.$("#access_token").val(),e.$(".loaderspinner").addClass("loading"),this.collection.create(this.collection.model,{attrs:{channel_id:t,access_token:a,token:o},wait:!0,dataType:"text",error:function(t,a,o){e.$(".loaderspinner").removeClass("loading"),n.showError(e,a.responseText)}})},loadvalidation:function vt(e){var t=e.get("status"),a=e.get("error_message"),o=e.get("social_icon"),i=e.get("social_url");this.$(".loaderspinner").removeClass("loading"),t?n.showSuccess(this,a,o,i):n.showError(this,a)}});new F({el:jQuery("#adminForm"),collection:new f}).onChangeChannelType();var M=new Q({el:jQuery("#adminForm"),collection:new E}),L=new O({el:jQuery("#adminForm"),collection:new T}),X=_.clone(Backbone.Events),D=new A({el:jQuery("#adminForm"),collection:new b,attributes:{dispatcher:X}}),N=new R({el:jQuery("#adminForm"),collection:new k,attributes:{dispatcher:X,messagesview:D}}),J=new V({el:jQuery("#adminForm"),collection:new m,fbChannelView:N}),P=new q({el:jQuery("#adminForm"),collection:new w}),K=new B({el:jQuery("#adminForm"),collection:new $,attributes:{dispatcher:X}}),W=new U({el:jQuery("#adminForm"),collection:new x}),Y=new z({el:jQuery("#adminForm"),collection:new y}),Z=new j({el:jQuery("#adminForm"),collection:new C}),et=new G({el:jQuery("#adminForm"),collection:new I}),tt=new H({el:jQuery("#adminForm"),collection:new S});window.xtAppDispatcher=X});